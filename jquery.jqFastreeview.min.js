!function(e){"use strict";e.extend({fastreeview:new function(n){function i(e,t){console.log(e+" ("+((new Date).getTime()-t.getTime())+"ms)")}function s(n,r){var i=e(n);if(r.ajaxUrl!==""&&i.children("ul").children("li").length===0){e.ajax({url:r.ajaxUrl,dataType:r.ajaxDataType,success:function(e,t,n){if(r.ajaxDataType==="html"){i.children("ul").html(e);i.trigger("updateTreeview");r.ajaxSuccess()}else if(r.ajaxDataType==="json"){var s="";for(var o=0;o<e.length;o++){s+="<li>";s+=e[o].value;if(e[o].hasChildren){s+="<ul></ul>"}s+="</li>"}i.children("ul").html(s);i.trigger("updateTreeview");r.ajaxSuccess()}else{r.ajaxSuccess()}},error:function(e,t,n){r.ajaxError()}})}if(i.children("ul").is(":visible")){i.children("ul").toggle(false);i.removeClass(t.collapsable).addClass(t.expandable)}else{i.children("ul").toggle(true);i.removeClass(t.expandable).addClass(t.collapsable)}}function o(t,n){var r=e(t);var i=t;for(var s=0;s<n.openId.length;s++){if(r.is("#"+n.openId[s])){return true}}return false}function u(n,r){var i=e(n);var a=n;var f=i.children("li");f.each(function(n){var i=e(this);var a=this;if(n===f.length-1){i.addClass(t.last)}if(i.has("ul").length){u(i.children("ul"),r);if(i.has(" > span."+t.hitarea).length===0){i.prepend("<span class='"+t.hitarea+"'></span>");if(i.children("ul").children("li").length!==0){i.children("ul").toggle(r.initialShow);if(r.initialShow){i.addClass(t.collapsable)}else{i.addClass(t.expandable)}if(o(i.children("ul").children("li"),r)){i.children("ul").toggle(true);i.removeClass(t.expandable).addClass(t.collapsable)}}else{i.children("ul").toggle(false);i.addClass(t.expandable)}i.children("span."+t.hitarea).click(function(){s(a,r)})}}})}function a(t,n){var r=e(t);r.bind("updateTreeview",function(){u(t,n)})}var r=this;r.version="1.0";r.defaults={debug:false,cssClass:"fastreeview",initialShow:false,openId:[],ajaxUrl:"",ajaxDataType:"",ajaxSuccess:function(){},ajaxError:function(){}};r.options={};r.construct=function(t){return this.each(function(){var n=e(this),s=this;var o;var f=e.extend(true,r.options,r.defaults,t);if(f.debug){o=new Date}n.addClass(f.cssClass);u(s,f);a(s,f);if(f.debug){i("Built complete :",o)}})}}});var t={expandable:"expandable",collapsable:"collapsable",last:"last",hitarea:"hitarea"};var n=e.fastreeview;e.fn.extend({fastreeview:n.construct})}(jQuery)